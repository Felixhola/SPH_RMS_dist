(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe612cac"],{"13d5":function(e,t,r){"use strict";var n=r("23e7"),i=r("d58f").left,o=r("a640"),a=r("ae40"),s=o("reduce"),c=a("reduce",{1:0});n({target:"Array",proto:!0,forced:!s||!c},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},a15b:function(e,t,r){"use strict";var n=r("23e7"),i=r("44ad"),o=r("fc6a"),a=r("a640"),s=[].join,c=i!=Object,l=a("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},b5ab:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-input",{attrs:{disabled:"",value:e.$route.query.roleName}}),r("el-tree",{ref:"tree",staticStyle:{margin:"20px 0"},attrs:{data:e.allPermissions,"node-key":"id","show-checkbox":"","default-expand-all":"",props:e.defaultProps}}),r("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.save}},[e._v("保存")]),r("el-button",{on:{click:function(t){return e.$router.replace({name:"Role"})}}},[e._v("取消")])],1)},i=[],o=(r("13d5"),r("d3b7"),r("a15b"),r("ac1f"),r("5319"),r("caad"),r("2532"),{name:"roleAuth",data:function(){return{loading:!1,allPermissions:[],defaultProps:{children:"children",label:"name"}}},created:function(){this.init()},methods:{init:function(){var e=this.$route.params.id;this.getPermissions(e)},getPermissions:function(e){var t=this;this.$API.permission.toAssign(e).then((function(e){var r=e.data.children;t.allPermissions=r;var n=t.getCheckedIds(r);t.$refs.tree.setCheckedKeys(n)}))},getCheckedIds:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,n){return n.select&&4===n.level?e.push(n.id):n.children&&t.getCheckedIds(n.children,r),e}),r)},save:function(){var e=this,t=this.$refs.tree.getCheckedKeys().join(",");this.loading=!0,this.$API.permission.doAssign(this.$route.params.id,t).then((function(t){e.loading=!1,e.$message.success(t.$message||"分配权限成功");var r=e.$route.query.roleName,n=e.$store.getters.roles;e.$router.replace("/acl/role/list",(function(){console.log("replace onComplete"),n.includes(r)&&window.location.reload()}))}))}}}),a=o,s=r("2877"),c=Object(s["a"])(a,n,i,!1,null,null,null);t["default"]=c.exports},d58f:function(e,t,r){var n=r("1c0b"),i=r("7b0b"),o=r("44ad"),a=r("50c4"),s=function(e){return function(t,r,s,c){n(r);var l=i(t),u=o(l),d=a(l.length),f=e?d-1:0,h=e?-1:1;if(s<2)while(1){if(f in u){c=u[f],f+=h;break}if(f+=h,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=h)f in u&&(c=r(c,u[f],f,l));return c}};e.exports={left:s(!1),right:s(!0)}}}]);